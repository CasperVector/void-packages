# Template file for 'sunpinyin-data-le'
pkgname=sunpinyin-data-le
version=20140820
revision=1
noarch=yes
hostmakedepends="sunpinyin-utils"
conflicts="sunpinyin-data-be"
short_desc="Data sets for sunpinyin - little endian"
maintainer="Casper Ti. Vector <caspervector@gmail.com>"
license="LGPL-2.1 CDDL"
homepage="https://github.com/sunpinyin/open-gram"
distfiles="$SOURCEFORGE_SITE/open-gram/dict.utf8-20131214.tar.bz2
 $SOURCEFORGE_SITE/open-gram/lm_sc.3gm.arpa-20140820.tar.bz2"
checksum="af70bc2bcd7af7468495774fed9e3a2de434650119fbc3d3388c2bcf7e0acb01
 751bab7c55ea93a2cedfb0fbb7eb09f67d4da9c2c55496e5f31eb8580f1d1e2f"
create_wrksrc=yes

do_build() {
	mkdir le be
	slmpack lm_sc.3gm.arpa dict.utf8 lm_sc.3gm
	slmthread lm_sc.3gm lm_sc.t3g.orig
	tslmendian -e le -i lm_sc.t3g.orig -o le/lm_sc.t3g
	genpyt -e le -i dict.utf8 -s lm_sc.t3g.orig \
		-l pydict_sc.le.log -o le/pydict_sc.bin
	tslmendian -e be -i lm_sc.t3g.orig -o be/lm_sc.t3g
	genpyt -e be -i dict.utf8 -s lm_sc.t3g.orig \
		-l pydict_sc.be.log -o be/pydict_sc.bin
}

do_install() {
	vmkdir usr/share/sunpinyin
	vcopy le/* usr/share/sunpinyin
}

sunpinyin-data-be_package() {
	short_desc="Data sets for sunpinyin - big endian"
	conflicts="sunpinyin-data-le"
	noarch=yes
	pkg_install() {
		vmkdir usr/share/sunpinyin
		vcopy be/* usr/share/sunpinyin
	}
}
